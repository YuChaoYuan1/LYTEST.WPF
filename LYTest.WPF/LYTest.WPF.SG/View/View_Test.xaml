<basemodel:DockControlDisposable
    x:Class="LYTest.WPF.SG.View.View_Test"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:Converter="clr-namespace:LYTest.WPF.SG.Converter"
    xmlns:basemodel="clr-namespace:LYTest.WPF.SG.Model"
    xmlns:Model="clr-namespace:LYTest.WPF.SG.Model"
    xmlns:vm="clr-namespace:LYTest.WPF.SG.ViewModels"
    mc:Ignorable="d" d:DesignHeight="450" d:DesignWidth="800"
    d:DataContext="{d:DesignInstance vm:TestVM}" >
    <basemodel:DockControlDisposable.Resources>
        <Converter:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </basemodel:DockControlDisposable.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <ComboBox x:Name="comboBoxSchema" Margin="0"
				ItemsSource="{Binding Schemas}"
				SelectedItem="{Binding SelectedSchema, Mode=TwoWay}"
				VerticalAlignment="Center" DisplayMemberPath="SCHEMA_NAME" />

            <Button Grid.Column="1" Height="25"
                    Name="buttonRefresh"
                    VerticalAlignment="Center"
                    Click="Button_Click_Refresh"
                    ToolTip="刷新方案">
                <Image Source="/Images/同步.png" Stretch="Uniform" />
            </Button>
            <TextBlock Name="textBlockCheckPara"
                       Margin="5,0"
                       Grid.Column="3"
                       ToolTip="{Binding StringPara}"
                       Foreground="{DynamicResource 字体颜色标准}"
                       VerticalAlignment="Center"
                       Text="{Binding StringPara}" FontSize="13"/>
        </Grid>
        <Grid Grid.Row="1" Grid.Column="1">
            <Grid.Resources>
                <ContextMenu MenuItem.Click="Click_SchemaExpand" x:Key="RightMenuSchema">
                    <MenuItem x:Name="menuExpand" Header="展开方案树"/>
                    <MenuItem x:Name="menuCollapsed" Header="折叠方案树"/>
                    <MenuItem x:Name="clearData" Header="清除本项实验数据"/>
                    <MenuItem x:Name="setResoultOK" Header="本项实验手动合格"/>
                    <MenuItem x:Name="setResoultNO" Header="本项实验手动不合格"/>
                </ContextMenu>
            </Grid.Resources>

            <!--<Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>-->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <!--方案树-->
            <ScrollViewer Name="treescroller" Grid.RowSpan="2" Grid.Column="0" Margin="0" Padding="0"
                  HorizontalScrollBarVisibility="Hidden"
                  VerticalScrollBarVisibility="Hidden" BorderThickness="0" >
                <Model:GridLineDecorator x:Name="treeViewDecorator2" Margin="0"
                                         GridLineBrush="{DynamicResource 边框颜色}" ClipToBounds="False">
                    <TreeView 
                          SelectedItemChanged="TreeSchema1_SelectedItemChanged"
                          Style="{StaticResource TreeViewStyleResultSummaryFirst}"
		                  ItemsSource="{Binding Categories}"
                          x:Name="treeSchemaLeft"
                          ContextMenu="{StaticResource RightMenuSchema}" >
                        <TreeView.ItemTemplate>
                            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                            </HierarchicalDataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>
                </Model:GridLineDecorator>
            </ScrollViewer>

            <!--明细-->
            <Model:GridLineDecorator x:Name="treeViewDecorator" Margin="5,1,0,0"
            GridLineBrush="{DynamicResource 边框颜色}" Grid.Column="1" ClipToBounds="True" >
                <TreeView  Margin="0,0,3,0" 
                  SelectedItemChanged="TreeSchema1_SelectedItemChanged"
                  Style="{StaticResource TreeViewStyleResultSummary}"
		          ItemsSource="{Binding Categories}"
                  x:Name="treeSchemaMeters"
                  ContextMenu="{StaticResource RightMenuSchema}" 
                               ScrollViewer.HorizontalScrollBarVisibility="Visible"
                  ScrollViewer.VerticalScrollBarVisibility="Auto" 
                               ScrollViewer.ScrollChanged="Columnscroller_ScrollChanged" >

                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>
            </Model:GridLineDecorator>
        </Grid>
    </Grid>
</basemodel:DockControlDisposable> 
