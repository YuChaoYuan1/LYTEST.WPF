<basemodel1:DockControlDisposable  xmlns:basemodel1="clr-namespace:LYTest.WPF.SG.Model"
        xmlns:Controls="clr-namespace:LYTest.WPF.SG.Controls" 
        x:Class="LYTest.WPF.SG.View.View_Input"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ViewModel="clr-namespace:LYTest.ViewModel.InputPara;assembly=LYTest.ViewModel"
        xmlns:basemodel="clr-namespace:LYTest.WPF.SG.Model"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        mc:Ignorable="d" 
        Foreground="{DynamicResource 字体颜色标准}"
        d:DesignHeight="600" d:DesignWidth="1200">
    <basemodel:DockControlDisposable.Resources>
        <ViewModel:MeterInputParaViewModel x:Key="MeterInputParaViewModel"/>

        <DataGridTemplateColumn x:Key="KeyYaojianColumn"  Width="55">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <CheckBox IsChecked="{Binding MD_CHECKED, Converter={StaticResource BoolBitConverter}}"
                              Content="{Binding MD_EPITOPE,Converter={StaticResource IndexFormatConverter}}"
                              Click="CheckBox_Click"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </basemodel:DockControlDisposable.Resources>


    <Grid DataContext="{StaticResource MeterInputParaViewModel}" Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <WrapPanel Name="wrapPanelParas" Orientation="Vertical"
                   Height="65" VerticalAlignment="Top" />
        <StackPanel Orientation="Horizontal"
                    Grid.Column="1"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Right">
            <StackPanel.Resources>
                <Style TargetType="Button">
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Margin" Value="5 0" />
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="MinWidth" Value="60" />
                </Style>
            </StackPanel.Resources>
            <Button ToolTip="读取电表的通讯地址" Click="ReadAddress_Click">
                <StackPanel Orientation="Vertical">
                    <Image Width="24" Height="24"  Source="/Images/读取地址.png" />
                    <TextBlock Text="读取地址"/>
                </StackPanel>
            </Button>

            <Button ToolTip="从MDS下载检定方案"
                                    CommandParameter="Frame_DownSchemeMis"
                                    Command="{Binding LocalCommand}">
                <StackPanel Orientation="Vertical">
                    <Image Width="24" Height="24"  Source="/Images/下载方案.png"/>
                    <TextBlock Text="下载方案"/>
                </StackPanel>
            </Button>
            <Button ToolTip="下载电表数据" Click="DownInfo_Click">
                <StackPanel Orientation="Vertical">
                    <Image Width="24" Height="24"  Source="/Images/下载信息.png"/>
                    <TextBlock Text="下载信息"/>
                </StackPanel>
            </Button>
            <Button ToolTip="点击按钮更换新的一批待检定的表,原来的表的检定信息将会被清空!"
                                    CommandParameter="NewMeters"
                                    Command="{Binding LocalCommand}" >
                <StackPanel Orientation="Vertical">
                    <Image Width="24" Height="24"  Source="/Images/更换新表.png"/>
                    <TextBlock Text="更换新表"/>
                </StackPanel>
            </Button>
            <Button ToolTip="点击按钮录入表信息完毕,开始进行检定" Click="OnOK">
                <StackPanel Orientation="Vertical">
                    <Image Width="24" Height="24"  Source="/Images/录入完成.png"/>
                    <TextBlock Text="录入完成" />
                </StackPanel>
            </Button>
        </StackPanel>

        <StackPanel Orientation="Horizontal" VerticalAlignment="Center"
                    Margin="0"
                    Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1">

            <TextBlock Text="检定方案" Margin="3,0" VerticalAlignment="Center"/>
            <ComboBox Name="comboBoxSchema"
                      Width="450"
                      MaxWidth="500"
                      Margin="3"
                      ItemsSource="{Binding Schemas}"
                      SelectedItem="{Binding SelectedSchema, Mode=TwoWay}"
                      DisplayMemberPath="SCHEMA_NAME" >
            </ComboBox>

            <CheckBox Name="CheckBoxUseJJGPoints"
                      Content="调用规程点"
                      Margin="5,0,15,0"
                      VerticalAlignment="Center"
                      Click="CheckBoxUseJJGPoints_Click"
                      ToolTip="勾选调用规程的误差负载点，不勾使用方案配置的误差点"
                      Visibility="Collapsed"/>
            <CheckBox Name="checkBoxQuickInput"
                      Content="向下填充"
                      Margin="50,0,10,0"
                      VerticalAlignment="Center"
                      Click="CheckBoxQuickInput_Click"/>
            <CheckBox Name="ChkColumnJump" Margin="20,0,10,0" VerticalAlignment="Center"
                      ToolTip="扫码一次跳转一列，达到列数后换下一行"
                      Click="ChkColumnJump_Click"
                      Visibility="Collapsed">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="扫码跳转" VerticalAlignment="Center"/>
                    <TextBox Name="TxtColJumpCount" Text="3" Width="25" MaxLength="2"/>
                    <TextBlock Text="列" VerticalAlignment="Center"/>
                </StackPanel>
            </CheckBox>
            <CheckBox Name="checkBoxDownload"
                      Content="扫码立即下载"
                      Margin="20,0,10,0"
                      VerticalAlignment="Center"
                      IsChecked="False" Click="CheckBoxDownload_Click"/>
            <StackPanel Orientation="Horizontal" Margin="30,0,15,0" VerticalAlignment="Center">
                <RadioButton GroupName="UpDownUri" Content="MDS" x:Name="UpDownMDS"  Margin="0,0,5,0"  Checked="UpDown_Checked"/>
                <RadioButton GroupName="UpDownUri" Content="营销" x:Name="UpDownYX"  Margin="0,0,5,0"   Checked="UpDown_Checked"/>
                <RadioButton GroupName="UpDownUri" Content="读取地址时读表号、等级、常数、表型号" x:Name="UpDownRead"  Checked="UpDown_Checked"/>
            </StackPanel>
        </StackPanel>
        <Border Grid.ColumnSpan="2" Grid.Row="2" CornerRadius="10" Padding="5"
                Background="White" BorderBrush="{DynamicResource 边框颜色}" BorderThickness="1">
            <DataGrid Name="dgv_MeterData"
                      SelectedCellsChanged="Dgv_MeterData_SelectedCellChanged"
                  CellEditEnding="Dgv_MeterData_CellEditEnding" 
                  ItemsSource="{Binding Meters}"
                  ComboBox.SelectionChanged="Event_AddNew"
                  HeadersVisibility="Column" SelectionUnit="Cell" >
                <DataGrid.ContextMenu>
                    <ContextMenu MenuItem.Click="Click_IsChecked">
                        <MenuItem x:Name="UpCheck" Header="向上选表"/>
                        <MenuItem x:Name="DownCheck" Header="向下选表"/>
                        <MenuItem x:Name="NoUpCheck" Header="向上取消选表"/>
                        <MenuItem x:Name="NoDownCheck" Header="向下取消选表"/>
                    </ContextMenu>
                </DataGrid.ContextMenu>
                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type DataGridCell}">
                                    <Border BorderBrush="{TemplateBinding BorderBrush}" 
									Background="{TemplateBinding Background}" 
									SnapsToDevicePixels="True">
                                        <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}"
										Content="{TemplateBinding Content}"
										VerticalAlignment="Stretch"
                                        HorizontalAlignment="Stretch"
										SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="{DynamicResource 网格选中项颜色}"/>

                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.CellStyle>
            </DataGrid>

        </Border>

    </Grid>
</basemodel1:DockControlDisposable>
