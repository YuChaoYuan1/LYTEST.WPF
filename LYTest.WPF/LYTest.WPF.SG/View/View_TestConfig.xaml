<basemodel:DockControlDisposable  
    xmlns:basemodel="clr-namespace:LYTest.WPF.SG.Model" 
    x:Class="LYTest.WPF.SG.View.View_TestConfig"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:local="clr-namespace:LYTest.WPF.SG.View" 
    xmlns:viewModel="clr-namespace:LYTest.ViewModel.CheckInfo;assembly=LYTest.ViewModel"
    mc:Ignorable="d" d:DesignHeight="600" d:DesignWidth="1200">

    <basemodel:DockControlDisposable.Resources>
        <viewModel:DataBaseDisplayViewModel x:Key="dataDisplayViewModel"/>
        <!--<ContextMenu x:Key="contextMenuSpecial">
            <MenuItem Header="误差试验编号"/>
            <MenuItem Header="走字试验编号"/>
        </ContextMenu>-->
    </basemodel:DockControlDisposable.Resources>

    <basemodel:DockControlDisposable.DataContext>
        <Binding Mode="OneWay"   Source="{StaticResource dataDisplayViewModel}"/>
    </basemodel:DockControlDisposable.DataContext>
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>
        <TreeView  Name="treeSchema"
                   SelectedItemChanged="AdvTree_ActiveItemChanged"
                   Margin="3,10" ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                   ItemsSource="{Binding Children}"
                   BorderThickness="0" Background="Transparent">
            <TreeView.Resources>
                <Style TargetType="TreeViewItem">
                    <Setter Property="IsExpanded" Value="true"/>
                </Style>
            </TreeView.Resources>
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                    <StackPanel Margin="3" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="{Binding Name}" Margin="3,0" VerticalAlignment="Center"/>
                        <TextBlock Text="{Binding ParaNo, StringFormat=(\{0\})}" Margin="3,0" VerticalAlignment="Center"/>
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
        <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Center" VerticalAlignment="Stretch" Background="Transparent"/>
        <Border Grid.Column="2" Background="White" CornerRadius="10">
            <Grid Margin="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="30"/>
                    <RowDefinition/>
                    <RowDefinition Height="50"/>
                </Grid.RowDefinitions>
                <StackPanel Margin="5,0"
				        Orientation="Horizontal" 
				        VerticalAlignment="Center">
                    <TextBlock Text="表名称" VerticalAlignment="Center"/>
                    <ComboBox  Width="250"
                           Name="comboBoxTable"
                           SelectionChanged="tableNameChanged"
					       SelectedItem="{Binding TableName}"
					       ItemsSource="{Binding TableNames}" Style="{DynamicResource StyleComboBox}"/>
                    <Button Content="添加字段" Width="100" Margin="5,0"
                            Style="{DynamicResource SuccessButtonStyle}"
                                CommandParameter="AddPKField"
                                Command="{Binding LocalCommand}"/>
                </StackPanel>
                <TabControl Grid.Row="1" >
                    <TabItem Header="主字段配置" >
                        <DataGrid ItemsSource="{Binding FieldsPK, Mode=TwoWay}" HeadersVisibility="Column">
                            <DataGrid.Columns>
                                <DataGridTemplateColumn Width="auto">
                                    <DataGridTemplateColumn.CellStyle>
                                        <Style TargetType="DataGridCell">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate>
                                                        <Button Name="PKMoveUp" ToolTip="上移" Click="ClickItemMove">
                                                            <Image Width="18" Source="/Images/上移.png"/>
                                                        </Button>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </DataGridTemplateColumn.CellStyle>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Width="auto">
                                    <DataGridTemplateColumn.CellStyle>
                                        <Style TargetType="DataGridCell">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate>
                                                        <Button Name="PKMoveDown" Click="ClickItemMove" ToolTip="下移">
                                                            <Image Width="18" Source="/Images/下移.png" />
                                                        </Button>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </DataGridTemplateColumn.CellStyle>
                                </DataGridTemplateColumn>
                                <DataGridComboBoxColumn Width="200"
                                                    x:Name="columnFieldPk"
                                                    IsReadOnly="False"
						                         	Header="字段名"
                                                    SelectedItemBinding="{Binding FieldName}" 
                                                    EditingElementStyle="{DynamicResource StyleComboBox}"/>
                                <DataGridTextColumn Width="*" IsReadOnly="False"
                                                x:Name="columnDisplayNamePk"
							                    Header="显示名"
                                                Binding="{Binding ViewName}"
                                                ElementStyle="{DynamicResource StyleWrapText}"
                                                EditingElementStyle="{DynamicResource StyleEditTextBox}"/>
                                <DataGridTemplateColumn Width="30">
                                    <DataGridTemplateColumn.CellStyle>
                                        <Style TargetType="DataGridCell">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate>
                                                        <Button   Name="DeletePK"
                                                              ToolTip="删除字段显示"
                                                              Margin="1"
                                                              Click="ClickItemMove" >
                                                            <Image Width="18" Source="{StaticResource 删除}" />
                                                        </Button>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </DataGridTemplateColumn.CellStyle>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </TabItem>
                </TabControl >
                <Button Grid.Row="2" Height="30" Width="120" VerticalAlignment="Center" ToolTip="保存" Click="Button_Click"
                        Style="{DynamicResource PrimaryButtonStyle}">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="{DynamicResource 保存}" Height="18" />
                        <TextBlock Text="保存" Margin="8,0" />
                    </StackPanel>
                </Button>
                <TextBlock Grid.Row="2" x:Name="textBlockSave"
				    Text="保存成功" Margin="10,0" Height="0"
				    VerticalAlignment="Center" HorizontalAlignment="Left"/>
            </Grid>
        </Border>

        <GridSplitter Grid.Column="3" Width="5" HorizontalAlignment="Center" VerticalAlignment="Stretch" Background="Transparent" />
        <Grid Grid.Column="4">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <TextBlock Text="结论视图列表" FontWeight="DemiBold" TextDecorations="Underline" HorizontalAlignment="Center" Margin="3"/>
            <ListBox Grid.Row="1" ItemsSource="{Binding ViewIds.ViewUnits}"
                     Background="Transparent" BorderThickness="0" SelectedItem="{Binding ViewIds.SelectedUnit,Mode=TwoWay}"
		             Margin="3"  Name="listboxViewId"  SelectionChanged="ViewItemChanged"
		             VerticalAlignment="Stretch">
                <ListBox.Resources>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="BorderBrush" Value="{x:Null}"/>
                        <Setter Property="MinHeight" Value="28" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListBoxItem">
                                    <Border BorderThickness="2" Margin="2" BorderBrush="{TemplateBinding BorderBrush}">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock HorizontalAlignment="Left"  Text="{Binding ViewId}"
                                                       Width="50"   VerticalAlignment="Center"/>
                                            <TextBlock HorizontalAlignment="Left" Text="{Binding ViewName}"
                                                       VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="true">
                                <Setter Property="BorderBrush" Value="{DynamicResource 边框颜色}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </ListBox.Resources>
            </ListBox>
            <Border Grid.Row="2" Background="White" Margin="10,10,10,0" CornerRadius="10">
              <StackPanel Margin="10" >
                <Grid Margin="0,20,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="编号" VerticalAlignment="Center" Margin="3"/>
                    <TextBox Grid.Column="1" VerticalAlignment="Center"  Text="{Binding ViewIdAdd}"  Margin="2"/>
                </Grid>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="名称" VerticalAlignment="Center"  Margin="3"/>
                    <TextBox Grid.Column="1" VerticalAlignment="Center" Text="{Binding ViewNameAdd}" Margin="2"/>
                </Grid>
                <Button Content="添加结论视图" Width="120" Margin="3" Height="30"
                        Style="{DynamicResource PrimaryButtonStyle}"
                                CommandParameter="AddResultViewId"
                                Command="{Binding LocalCommand}"/>
            </StackPanel>              
            </Border>

        </Grid>
    </Grid>
</basemodel:DockControlDisposable> 
