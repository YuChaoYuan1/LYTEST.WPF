<UserControl x:Class="LYTest.WPF.SG.Schema.Error.ControlTreeError"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:LocalControl="clr-namespace:LYTest.WPF.SG.Controls"
             xmlns:local="clr-namespace:LYTest.WPF.SG.Schema.Error"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <Style  TargetType="{x:Type ListBoxItem}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="HorizontalContentAlignment"
                    Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="VerticalContentAlignment" 
                    Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="Padding" Value="2,0,0,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <Border x:Name="Bd" SnapsToDevicePixels="true"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                Background="{TemplateBinding Background}" 
                                Padding="{TemplateBinding Padding}" >
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    <StackPanel>
        <StackPanel Orientation="Horizontal">
            <!--添加-->
            <Button Margin="5,3" CommandParameter="AddCategory" Command="{Binding LocalCommand}">
                <Image Width="18" ToolTip="添加" Source="{DynamicResource 添加}"/>
            </Button>
        </StackPanel>
        <StackPanel Margin="3" Orientation="Horizontal">
            <TextBlock Text="相对Ib圈数:" VerticalAlignment="Center" Margin="3"/>
            <TextBox Margin="0,3,3,3" Text="{Binding LapCountIb}" Width="50" VerticalAlignment="Center"/>
            <TextBlock Text="圈" VerticalAlignment="Center" Margin="0,3,20,3"/>
            <TextBlock Text="误差限倍数:" Margin="10,3,0,3" VerticalAlignment="Center"/>
            <TextBox Width="50" MaxLength="4" Text="{Binding GuichengMulti}"
                     Margin="3" VerticalAlignment="Center"/>
            <TextBlock Text="%" VerticalAlignment="Center"/>
        </StackPanel>
        <ListBox ItemsSource="{Binding Categories}"
                 BorderBrush="{x:Null}"
                 Background="{x:Null}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Expander IsExpanded="True">
                        <Expander.Header>
                            <StackPanel Orientation="Horizontal">
                                <!--功率方向-->
                                <LocalControl:ControlEnumComboBox 
                                          VerticalAlignment="Center"  Margin="3,0"
                                          SelectedItem="{Binding Fangxiang}"
                                          EnumName="PowerDirection" Width="120"
                                    Style="{DynamicResource StyleComboBox}" />
                                <!--元件-->
                                <LocalControl:ControlEnumComboBox  Margin="3,0"
                                          VerticalAlignment="Center"
                                          SelectedItem="{Binding Component}"
                                          EnumName="PowerElement"
                                          Width="80"
                                          Style="{DynamicResource StyleComboBox}"/>
                                <Button Margin="5,3" Click="Button_Click">
                                    <Image Width="18" ToolTip="删除"   Source="{DynamicResource 删除}"/>
                                </Button>
                            </StackPanel>
                        </Expander.Header>
                        <local:ControlDataGridError Margin="25,3"
                                    FlagLoad="{Binding FlagLoad}"/>
                    </Expander>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel>
</UserControl>
