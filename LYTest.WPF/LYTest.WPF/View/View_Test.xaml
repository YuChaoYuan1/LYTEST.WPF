<basemodel:DockControlDisposable
    x:Class="LYTest.WPF.View.View_Test"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:Converter="clr-namespace:LYTest.WPF.Converter"
    xmlns:basemodel="clr-namespace:LYTest.WPF.Model"
    xmlns:Model="clr-namespace:LYTest.WPF.Model"
    mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <basemodel:DockControlDisposable.Resources>
        <Converter:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </basemodel:DockControlDisposable.Resources>


    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid Height="auto">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
            </Grid.ColumnDefinitions>
            <ComboBox 
                Margin="3,0"
				x:Name="comboBoxSchema"
				HorizontalAlignment="Stretch"
				ItemsSource="{Binding Schemas}"
				SelectedItem="{Binding SelectedSchema, Mode=TwoWay}"
				VerticalAlignment="Center"
				Style="{DynamicResource StyleComboBox}"  >
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding SCHEMA_NAME}" ToolTip="{Binding SCHEMA_NAME}" />
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>



            <Button Margin="3,0" Grid.Column="1"
                    Name="buttonRefresh"
                    VerticalAlignment="Center"
                    Click="Button_Click_Refresh"
                    ToolTip="{DynamicResource 刷新方案}">
                <Image Width="16"  Source="/Images/Refresh.png"/>
            </Button>
            <TextBlock Name="textBlockCheckPara"
                       Margin="5,0"
                       Grid.Column="3"
                       ToolTip="{Binding StringPara}"
                       Foreground="{DynamicResource 字体颜色标准}"
                       VerticalAlignment="Center"
                       Text="{Binding StringPara}" FontSize="13"/>
        </Grid>
        <!--VirtualizingStackPanel.VirtualizationMode="Recycling"
                  VirtualizingStackPanel.IsVirtualizing="True"  虚拟化好像效果一般般-->
        <Grid Grid.Row="1" Grid.Column="1">
            <Grid.Resources>
                <ContextMenu MenuItem.Click="Click_SchemaExpand" x:Key="RightMenuSchema">
                    <MenuItem x:Name="menuExpand" Header="展开方案树"/>
                    <MenuItem x:Name="menuCollapsed" Header="折叠方案树"/>
                    <MenuItem x:Name="clearData" Header="清除本项实验数据"/>
                    <MenuItem x:Name="setResoultOK" Header="本项实验手动合格"/>
                    <MenuItem x:Name="setResoultNO" Header="本项实验手动不合格"/>
                </ContextMenu>
            </Grid.Resources>

            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <ScrollViewer Name="treescroller" Grid.RowSpan="2" Grid.Column="0" Margin="0"
                HorizontalScrollBarVisibility="Visible"
                VerticalScrollBarVisibility="Hidden" >
                <Model:GridLineDecorator x:Name="treeViewDecorator2" Margin="0"
                    GridLineBrush="{DynamicResource 边框颜色}"
                     ClipToBounds="False">
                    <TreeView  Margin="3,3,0,0" 
                        SelectedItemChanged="TreeSchema1_SelectedItemChanged"
                        Style="{StaticResource TreeViewStyleResultSummaryFirst}"
		                ItemsSource="{Binding Categories}"
                        x:Name="treeSchemaLeft"
                        ContextMenu="{StaticResource RightMenuSchema}" >
                        <TreeView.ItemTemplate>
                            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                            </HierarchicalDataTemplate>
                        </TreeView.ItemTemplate>
                    </TreeView>
                </Model:GridLineDecorator>
            </ScrollViewer>

            <ScrollViewer x:Name="meterscroller" Grid.Column="1" Margin="0"
                          VerticalScrollBarVisibility="Visible"
                          HorizontalScrollBarVisibility="Hidden">
                <Model:GridLineDecorator Margin="0"
            GridLineBrush="{DynamicResource 边框颜色}" ClipToBounds="True" >
                    <TreeView
                      Style="{StaticResource TreeViewStyleResultSummaryMeterPos}"
                      Margin="0,3,0,0">

                    </TreeView>
                </Model:GridLineDecorator>
            </ScrollViewer>

            <!--<ScrollViewer Name="columnscroller"
                  HorizontalScrollBarVisibility="Visible"
                  VerticalScrollBarVisibility="Auto" 
                  ScrollChanged="columnscroller_ScrollChanged"
                  DockPanel.Dock="Right"
                          Margin="0"
                          >-->
            <Model:GridLineDecorator x:Name="treeViewDecorator" Margin="0"
            GridLineBrush="{DynamicResource 边框颜色}"
            Grid.Row="1" Grid.Column="1" ClipToBounds="True" >
                <TreeView  Margin="0,0,3,0" 
                    SelectedItemChanged="TreeSchema1_SelectedItemChanged"
                    Style="{StaticResource TreeViewStyleResultSummary}"
		            ItemsSource="{Binding Categories}"
                    x:Name="treeSchemaMeters"
                    ContextMenu="{StaticResource RightMenuSchema}" 
                    ScrollViewer.HorizontalScrollBarVisibility="Visible"
                    ScrollViewer.VerticalScrollBarVisibility="Auto" 
                    ScrollViewer.ScrollChanged="Columnscroller_ScrollChanged" >
                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Children}" />
                    </TreeView.ItemTemplate>
                </TreeView>
            </Model:GridLineDecorator>
            <!--</ScrollViewer>-->
        </Grid>
    </Grid>
</basemodel:DockControlDisposable> 
